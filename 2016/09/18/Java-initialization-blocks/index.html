<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Java," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Initialization blocks in Java are used for initializing when a class is loaded or an instance is instantiated. Java has two kinds of initialization block, namely, static initialization block and insta">
<meta property="og:type" content="article">
<meta property="og:title" content="Java Initialization Blocks">
<meta property="og:url" content="https://accessun.github.io/2016/09/18/Java-initialization-blocks/index.html">
<meta property="og:site_name" content="Accessun's Blog">
<meta property="og:description" content="Initialization blocks in Java are used for initializing when a class is loaded or an instance is instantiated. Java has two kinds of initialization block, namely, static initialization block and insta">
<meta property="og:updated_time" content="2016-09-21T11:30:12.154Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java Initialization Blocks">
<meta name="twitter:description" content="Initialization blocks in Java are used for initializing when a class is loaded or an instance is instantiated. Java has two kinds of initialization block, namely, static initialization block and insta">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="https://accessun.github.io/2016/09/18/Java-initialization-blocks/"/>

  <title> Java Initialization Blocks | Accessun's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Accessun's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Java Initialization Blocks
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-18T22:10:32+08:00" content="2016-09-18">
              2016-09-18
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Initialization blocks in Java are used for initializing when a class is loaded or an instance is instantiated. Java has two kinds of initialization block, namely, static initialization block and instance initialization block (or non-static initializer block). These two kinds of block may seem a little bit odd when one first comes across them.</p>
<p>We know that static fields in a class can be simply initialized by assigning them on declaration, like the following.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> T var = ...;</div></pre></td></tr></table></figure>
<p>But sometimes, it is required that some work needs to be done before they are assigned to those fields. It is quite handy to use static initialization blocks in these circumstances. In the <code>DemoUtil</code> class below, the code that deal with initialization is specified within the pair of curly braces after the <code>static</code> key word. Before the assignment to the static field <code>var</code> of type <code>T</code> is carried out, some pre-precessing work is done before the assignment.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoUtil</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> T var;</div><div class="line"></div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        <span class="comment">// some pre-processing to var before assignment</span></div><div class="line">        var = ...;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// other code comes below</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Instance initialization blocks, or non-static initializer blocks are used in a very similar fashion. In the following <code>Demo</code> class, you can directly perform some other operation before assigning value to the instance field <code>var</code> of type <code>T</code>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</div><div class="line">    T var;</div><div class="line"></div><div class="line">    &#123;</div><div class="line">        <span class="comment">// some pre-processing and instance field assignment</span></div><div class="line">        var = ...;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// other code comes below</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>It seems that we can also achieve the same goal by using constructor in the <code>Demo</code> class. Then, what is the difference between constructor and instance initialization block?</p>
<p>Sometimes, we may have multiple constructors overloaded.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Demo</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">// routine B</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Demo</span><span class="params">(<span class="keyword">boolean</span> flag)</span> </span>&#123;</div><div class="line">    <span class="comment">// routine C</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Demo</span><span class="params">(String info, <span class="keyword">boolean</span> flag)</span> </span>&#123;</div><div class="line">    <span class="comment">// routine D</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>And in some cases, we want to share common routine among all constructors. More specifically, we want common routine, say <code>routine A</code>, to be performed before all the routines in each constructor. Then you can put <code>routine A</code> into instance initialization block. <code>routine A</code> will then be copied into the beginning part of each constructor on compiling. However, it makes no difference if you cut the code in the constructor and paste it into an instance initialization block when your class only has one single constructor.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Demo</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">// &lt;-- [routine A will be copied here on compiling]</span></div><div class="line">    <span class="comment">// routine B</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Demo</span><span class="params">(<span class="keyword">boolean</span> flag)</span> </span>&#123;</div><div class="line">    <span class="comment">// &lt;-- [routine A will be copied here on compiling]</span></div><div class="line">    <span class="comment">// routine C</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Demo</span><span class="params">(String info, <span class="keyword">boolean</span> flag)</span> </span>&#123;</div><div class="line">    <span class="comment">// &lt;-- [routine A will be copied here on compiling]</span></div><div class="line">    <span class="comment">// routine D</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">    <span class="comment">// routine A</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Execution-order-of-multiple-initialization-blocks"><a href="#Execution-order-of-multiple-initialization-blocks" class="headerlink" title="Execution order of multiple initialization blocks"></a>Execution order of multiple initialization blocks</h3><p>When multiple initialization blocks and constructors are simultaneously present in a class, it is important that we should be aware of the order of execution of each code block. The following is an example designed to clarify this point.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Temp</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Temp</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Temp()"</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Temp</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Temp(int val)"</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        System.out.println(<span class="string">"First static init block"</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        System.out.println(<span class="string">"Second static init block"</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    &#123;</div><div class="line">        System.out.println(<span class="string">"First non-static init block"</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    &#123;</div><div class="line">        System.out.println(<span class="string">"Second non-static init block"</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="keyword">new</span> Temp();</div><div class="line">        System.out.println(<span class="string">"===================="</span>);</div><div class="line">        <span class="keyword">new</span> Temp();</div><div class="line">        System.out.println(<span class="string">"===================="</span>);</div><div class="line">        <span class="keyword">new</span> Temp(<span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">// output</div><div class="line">First static init block</div><div class="line">Second static init block</div><div class="line">First non-static init block</div><div class="line">Second non-static init block</div><div class="line">Temp()</div><div class="line">====================</div><div class="line">First non-static init block</div><div class="line">Second non-static init block</div><div class="line">Temp()</div><div class="line">====================</div><div class="line">First non-static init block</div><div class="line">Second non-static init block</div><div class="line">Temp(int val)</div></pre></td></tr></table></figure>
<p>In this example code, we can observe that once the class is loaded, the code within the static block is immediately executed and is executed only once. When multiple static blocks are present, they are executed in the order of their presence in the class. The code in instance initialization blocks are called each time before any constructor is called. And they are called every time on every instance initialization. (This is because the compiler just copies the code in the instance initialization block into every constructor of the class when the source code is compiled to Java byte code.) The order of execution of instance initialization block is also in accordance with their presence in the class.</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Java/" rel="tag">#Java</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/08/31/A-simple-demonstration-of-data-relation-design-using-Entity-Attribute-Value-model/" rel="next" title="A simple demonstration of data relation design using Entity-Attribute-Value model">
                <i class="fa fa-chevron-left"></i> A simple demonstration of data relation design using Entity-Attribute-Value model
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/10/16/Make-a-Tape-Photo-by-CSS/" rel="prev" title="Make a Tape Photo by CSS">
                Make a Tape Photo by CSS <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Xin Sun" />
          <p class="site-author-name" itemprop="name">Xin Sun</p>
          <p class="site-description motion-element" itemprop="description">Let it be</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">8</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Execution-order-of-multiple-initialization-blocks"><span class="nav-number">1.</span> <span class="nav-text">Execution order of multiple initialization blocks</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xin Sun</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
